{"ast":null,"code":"import { Subject } from \"rxjs\";\nimport { ChartDto } from \"src/models/chartDto\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../proxy/proxy.service\";\nimport * as i2 from \"src/utils/timeConverter\";\nexport class AdapterSetvice {\n  constructor(proxyService, timeConverterService) {\n    this.proxyService = proxyService;\n    this.timeConverterService = timeConverterService;\n    this.subject = new Subject();\n    this.subJectDto = new Subject();\n  }\n  getStockValues(stock, interval, range) {\n    this.proxyService.consultStockVaration(stock, interval, range).subscribe(res => {\n      this.subject.next(res);\n    });\n    return this.converterchartServiceToChartDto();\n  }\n  converterchartServiceToChartDto() {\n    let chartDto;\n    this.subject.subscribe(sub => {\n      let dateFormated = [];\n      sub.chart.result[0].timestamp.forEach(timeUnformated => dateFormated.push(this.timeConverterService.convertTimeSteampToBrazilianDateTime(timeUnformated)));\n      console.log(sub.chart);\n      chartDto = new ChartDto(sub.chart.result[0].indicators.quote[0].open, dateFormated);\n      this.subJectDto.next(chartDto);\n    });\n    return this.subJectDto;\n  }\n}\nAdapterSetvice.ɵfac = function AdapterSetvice_Factory(t) {\n  return new (t || AdapterSetvice)(i0.ɵɵinject(i1.ProxyService), i0.ɵɵinject(i2.TimeConverter));\n};\nAdapterSetvice.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AdapterSetvice,\n  factory: AdapterSetvice.ɵfac,\n  providedIn: \"root\"\n});","map":{"version":3,"mappings":"AACA,SAAqBA,OAAO,QAAQ,MAAM;AAC1C,SAASC,QAAQ,QAAQ,qBAAqB;;;;AAQ9C,OAAM,MAAOC,cAAc;EAKzBC,YACUC,YAA0B,EAC1BC,oBAAmC;IADnC,iBAAY,GAAZD,YAAY;IACZ,yBAAoB,GAApBC,oBAAoB;IAJ9B,YAAO,GAAG,IAAIL,OAAO,EAAO;IAC5B,eAAU,GAAG,IAAIA,OAAO,EAAY;EAIjC;EACIM,cAAcA,CAACC,KAAa,EAAEC,QAAkB,EAAEC,KAAY;IACnE,IAAI,CAACL,YAAY,CACdM,oBAAoB,CAACH,KAAK,EAAEC,QAAQ,EAAEC,KAAK,CAAC,CAC5CE,SAAS,CAAEC,GAAG,IAAI;MACjB,IAAI,CAACC,OAAO,CAACC,IAAI,CAACF,GAAG,CAAC;IACxB,CAAC,CAAC;IACJ,OAAO,IAAI,CAACG,+BAA+B,EAAE;EAC/C;EACOA,+BAA+BA;IACpC,IAAIC,QAAa;IACjB,IAAI,CAACH,OAAO,CAACF,SAAS,CAAEM,GAAQ,IAAI;MAClC,IAAIC,YAAY,GAAQ,EAAE;MAC1BD,GAAG,CAACE,KAAK,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,SAAS,CAACC,OAAO,CAAEC,cAAsB,IAC3DL,YAAY,CAACM,IAAI,CACf,IAAI,CAACnB,oBAAoB,CAACoB,oCAAoC,CAC5DF,cAAc,CACf,CACF,CACF;MACDG,OAAO,CAACC,GAAG,CAACV,GAAG,CAACE,KAAK,CAAC;MACtBH,QAAQ,GAAG,IAAIf,QAAQ,CACrBgB,GAAG,CAACE,KAAK,CAACC,MAAM,CAAC,CAAC,CAAC,CAACQ,UAAU,CAACC,KAAK,CAAC,CAAC,CAAC,CAACC,IAAI,EAC5CZ,YAAY,CACb;MACD,IAAI,CAACa,UAAU,CAACjB,IAAI,CAACE,QAAQ,CAAC;IAChC,CAAC,CAAC;IACF,OAAO,IAAI,CAACe,UAAU;EACxB;;AApCW7B,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;SAAdA,cAAc;EAAA8B,SAAd9B,cAAc;EAAA+B,YAFb;AAAM","names":["Subject","ChartDto","AdapterSetvice","constructor","proxyService","timeConverterService","getStockValues","stock","interval","range","consultStockVaration","subscribe","res","subject","next","converterchartServiceToChartDto","chartDto","sub","dateFormated","chart","result","timestamp","forEach","timeUnformated","push","convertTimeSteampToBrazilianDateTime","console","log","indicators","quote","open","subJectDto","factory","providedIn"],"sourceRoot":"","sources":["/Users/diegosantana/Documents/FrontEnd/FrontEndChallenge/src/acl/adapter/adapter.service.ts"],"sourcesContent":["import { Injectable } from \"@angular/core\";\nimport { Observable, Subject } from \"rxjs\";\nimport { ChartDto } from \"src/models/chartDto\";\nimport { Interval } from \"src/models/interval.enum\";\nimport { Range } from \"src/models/range.enum\";\nimport { TimeConverter } from \"src/utils/timeConverter\";\nimport { ProxyService } from \"../proxy/proxy.service\";\n@Injectable({\n  providedIn: \"root\",\n})\nexport class AdapterSetvice {\n  private data: any;\n\n  subject = new Subject<any>();\n  subJectDto = new Subject<ChartDto>();\n  constructor(\n    private proxyService: ProxyService,\n    private timeConverterService: TimeConverter\n  ) {}\n  public getStockValues(stock: string, interval: Interval, range: Range) {\n    this.proxyService\n      .consultStockVaration(stock, interval, range)\n      .subscribe((res) => {\n        this.subject.next(res);\n      });\n    return this.converterchartServiceToChartDto();\n  }\n  public converterchartServiceToChartDto(): Observable<ChartDto> {\n    let chartDto: any;\n    this.subject.subscribe((sub: any) => {\n      let dateFormated: any = [];\n      sub.chart.result[0].timestamp.forEach((timeUnformated: number) =>\n        dateFormated.push(\n          this.timeConverterService.convertTimeSteampToBrazilianDateTime(\n            timeUnformated\n          )\n        )\n      );\n      console.log(sub.chart);\n      chartDto = new ChartDto(\n        sub.chart.result[0].indicators.quote[0].open,\n        dateFormated\n      );\n      this.subJectDto.next(chartDto);\n    });\n    return this.subJectDto;\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}